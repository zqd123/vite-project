import{i as Y,n as C,e as O,A as b,g as R,a as W,r as X,c as z,d as A}from"./el-button-6fcdd3d5.js";import{O as G,an as U,a2 as K,g as $,au as V,z as j,av as g,aa as E,d as q,e as J,I as N,h as Q}from"./index-53f47d2a.js";import{v as Z}from"./event-23fb686c.js";let a;const P=e=>{var t;if(!Y)return 0;if(a!==void 0)return a;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const d=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const u=s.offsetWidth;return(t=o.parentNode)==null||t.removeChild(o),a=d-u,a};var m=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(m||{});const ie=(e,t,o)=>{let d={offsetX:0,offsetY:0};const s=i=>{const r=i.clientX,v=i.clientY,{offsetX:l,offsetY:f}=d,c=e.value.getBoundingClientRect(),p=c.left,y=c.top,x=c.width,h=c.height,_=document.documentElement.clientWidth,D=document.documentElement.clientHeight,k=-p+l,H=-y+f,B=_-p-x+l,I=D-y-h+f,T=M=>{const w=Math.min(Math.max(l+M.clientX-r,k),B),L=Math.min(Math.max(f+M.clientY-v,H),I);d={offsetX:w,offsetY:L},e.value.style.transform=`translate(${C(w)}, ${C(L)})`},S=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",S)},u=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",s)},n=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",s)};G(()=>{U(()=>{o.value?u():n()})}),K(()=>{n()})},re=(e,t={})=>{$(e)||Z("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||O("popup"),d=V(()=>o.bm("parent","hidden"));if(!Y||b(document.body,d.value))return;let s=0,u=!1,n="0";const i=()=>{setTimeout(()=>{X(document==null?void 0:document.body,d.value),u&&document&&(document.body.style.width=n)},200)};j(e,r=>{if(!r){i();return}u=!b(document.body,d.value),u&&(n=document.body.style.width),s=P(o.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,l=R(document.body,"overflowY");s>0&&(v||l==="scroll")&&u&&(document.body.style.width=`calc(100% - ${s}px)`),W(document.body,d.value)}),g(()=>i())},F=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:n=>{t=n.target===n.currentTarget},onMouseup:n=>{o=n.target===n.currentTarget}}},ee=z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:A([String,Array,Object])},zIndex:{type:A([String,Number])}}),oe={click:e=>e instanceof MouseEvent},te="overlay";var ne=q({name:"ElOverlay",props:ee,emits:oe,setup(e,{slots:t,emit:o}){const d=O(te),s=r=>{o("click",r)},{onClick:u,onMousedown:n,onMouseup:i}=F(e.customMaskEvent?void 0:s);return()=>e.mask?J("div",{class:[d.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:n,onMouseup:i},[N(t,"default")],m.STYLE|m.CLASS|m.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[N(t,"default")])}});const le=ne;export{le as E,re as a,F as b,ie as u};
